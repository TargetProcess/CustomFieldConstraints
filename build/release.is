tau.mashups.addModule("CustomFieldConstraints/config", [
    {
        "processId": 2,
        "constraints": {
            "userstory": {
                "entityStates": [
                    {
                        "name": "Open",
                        "requiredCustomFields": [
                            "Cf1"
                        ]
                    }
                ],
                "customFields": [
                    {
                        "name": "Cf1",
                        "valueIn": [
                            "Cf1ValueThatRequiresCf2"
                        ],
                        "requiredCustomFields": [
                            "Cf2"
                        ]
                    }
                ]
            },
            "project": {
                "customFields": [
                    {
                        "name": "Cf1",
                        "valueNotIn": [
                            "Cf1ValueThatDoesNotRequireCf2"
                        ],
                        "requiredCustomFields": [
                            "Cf2"
                        ]
                    }
                ]
            }
        }
    }
]);
/*! v0.1.0 Build Tue Dec 01 2015 18:44:51 GMT+0300 (MSK) */
!function(){var e={},t=function(){var t,n,r,i=Array.prototype.slice.call(arguments,0);"string"==typeof i[0]?(r=i[0],t=i[1],n=i[2]):Array.isArray(i[0])&&(t=i[0],n=i[1]);var o=t.reduce(function(e,t){return e.addDependency(t)},tau.mashups);return o=o.addDependency(r+"/config"),o=o.addMashup(function(){var i=Array.prototype.slice.call(arguments,0);if(t.length>0&&1===i.length)throw new Error("Can't properly load dependencies for mashup \""+r+'", mashup is stopped.');return e.variables=i[i.length-1],i.length-t.length===2?e.config=i[i.length-2]:e.config={},Object.freeze&&(Object.freeze(e.variables),Object.freeze(e.config),Object.freeze(e)),n.apply(null,i)})};t("CustomFieldConstraints",["Underscore","jQuery","tp3/mashups/storage","tau/libs/store2/store2","tau/core/class","tp3/mashups/sliceinterrupter","tp3/mashups/componenteventlistener","tau/service.container","tau/services/service.navigator","tau/services/service.applicationContext","tau/components/component.application.generic","tau/components/component.page.base","tau/core/extension.base","tau/core/bus.reg","tau/core/view-base","tau/components/component.container","tau/services/service.customFields.cached","tau/core/templates-factory","tau/components/component.creator","tau/ui/extensions/application.generic/ui.extension.application.generic.placeholder","react","tau/configurator","tau/utils/utils.date"],function(t,n,r,i,o,a,u,s,c,l,f,p,d,v,h,y,m,g,b,_,C,O,x){return function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var r={};return n.m=t,n.c=r,n.p="",n.p=e.variables?e.variables.mashupPath:n.p,n(0)}([function(e,t,n){n(2),n(55),n(63),n(71),n(38),n(44),n(27),n(28),n(29),n(30),n(49),n(32),n(8),n(34),n(35),n(6),n(42),n(37),n(39),e.exports=n(7)},,function(t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=r(3),a=r(4),u=i(a),s=r(9),c=i(s),l=r(10),f=i(l),p=r(13),d=i(p),v=r(15),h=i(v),y=r(18),m=i(y),g=r(19),b=i(g),_=e.variables.placeholderId,C=e.config,O=function(e,t){var n=e.entity,i=e.processId,o=e.requirementsData;!function(){var e=r(55),a=r(56),u=document.getElementById(_).appendChild(document.createElement("div")),s=function(){e.unmountComponentAtNode(u),t.reject({response:{Message:"The changes were not saved as you didn't fill out the required custom fields"},status:400})},c=function(){e.unmountComponentAtNode(u),t.resolve()};e.render(e.createElement(a,{entity:n,mashupConfig:C,onAfterSave:c,onCancel:s,processId:i,requirementsData:o}),u)}(r)},x=function(){O.apply(void 0,arguments)},w=function(){var e=new u["default"],t=new c["default"](C),n=[new f["default"](e,t,x),new d["default"](e,t,x),new h["default"](e,t,x),new m["default"](e,t,x),new b["default"](e,t)];o.invoke(n,"subscribe")};w()},function(e,n){e.exports=t},function(e,t,n){"use strict";var r=n(5),i=n(3),o=n(6),a=n(7),u=n(8),s=u.extend({init:function(){this.storage=new o},getEntitiesDetailsPromise:function(e,t){var n=r.Deferred();return this.storage.getEntities().ofType(t).filteredBy({id:{$in:e}}).withFieldSetRestrictedTo(this._getEntitiesDetailsFilter(t)).withCallOnDone(function(e){n.resolve(i.map(e,i.bind(function(e){return e&&e.entityType&&(e.type=e.entityType.name),e},this)))}).execute(),n.promise()},getDefaultProcessPromise:function(){var e=r.Deferred();return this.storage.getEntities().ofType("process").filteredBy({isDefault:{$eq:"true"}}).withFieldSetRestrictedTo(["id"]).withCallOnDone(function(t){var n=t[0];e.resolve(n)}).execute(),e.promise()},getEntityStatesDetailsPromise:function(e,t,n){var i=r.Deferred();return this.storage.getEntities().ofType("entityState").filteredBy(this._getEntityStateFilter(t,n)).withFieldSetRestrictedTo([{workflow:["id"]},{process:["id"]},{entityType:["name"]},"name","isInitial","isFinal","isPlanned",{subEntityStates:["id","name",{workflow:["id"]},"isInitial","isFinal","isPlanned"]}]).withCallOnDone(i.resolve).execute(),i.promise()},getTasksDetailsPromise:function(e){var t=r.Deferred(),n=i.chain(e).filter(function(e){return"userstory"===e.entityType.name.toLowerCase()}).map(function(e){return i.filter(e.tasks,function(e){return!e.isFinal})}).flatten().map(function(e){return e.id}).value();return n.length>0?this.storage.getEntities().ofType("task").filteredBy({id:{$in:n}}).withFieldSetRestrictedTo(["id","name","customFields",{entityType:["name"]},{project:[{process:["id"]}]},{userStory:["id","name"]}]).withCallOnDone(t.resolve).execute():t.resolve([]),t.promise()},getTeamProjectsPromise:function(e){var t=i.chain(e).filter(function(e){return e.project&&!i.isEmpty(e.assignedTeams)}).map(function(e){return i.pluck(e.project.teamProjects,"id")}).flatten().unique().value();if(i.isEmpty(t))return r.when([]);var n=r.Deferred();return this.storage.getEntities().ofType("teamProject").filteredBy({id:{$in:t}}).withFieldSetRestrictedTo([{team:["id"]},{project:["id"]},{workflows:["id","name",{entityType:["name"]},{parentWorkflow:["id"]}]}]).withCallOnDone(n.resolve).execute(),n.promise()},getEntityStatesForTypesAndProcessesPromise:function(e,t,n){var r="%22"+t.join("%22,%20%22")+"%22",i=n.join(",%20");return new a(e).findAll("entitystate?take=1000&skip=0&select=new%20%28id,%20name,%20isInitial,%20isFinal,%20isPlanned,%20entityType%20as%20entityType,%20process%20as%20process%29&where=entityType.name%20in%20["+r+"]%20and%20process.id%20in%20["+i+"]")},getCustomFieldsForTypesAndProcessesPromise:function(e,t,n){var r="%22"+t.join("%22,%20%22")+"%22",i=n.join(",%20");return new a(e).findAll("customfield?take=1000&skip=0&select=new%20(required,name,%20id,%20config,%20fieldType,%20value,%20entityType.name%20as%20entityTypeName,process.id%20as%20processId)&where=entityType.name%20in%20["+r+"]%20and%20process.id%20in%20["+i+"]")},getEntityProcessId:function(e,t){return"project"===e.entityType.name.toLowerCase()?e.process.id:e.project?e.project.process.id:t.id},_getEntitiesDetailsFilter:function(e){var t=["customFields","name",{entityType:["name"]}];return t.push(this._isProjectType(e)?{process:["id"]}:{project:[{process:["id"]},{teamProjects:["id"]}]}),"userstory"===e.toLowerCase()&&t.push({tasks:["id","name",{entityState:["isFinal"]}]}),this._isAssignableType(e)&&t.push({assignedTeams:["id",{team:["id"]}]}),t},_getEntityStateFilter:function(e,t){var n=i.chain(e).map(function(e){return this.getEntityProcessId(e,t)},this).unique().value();return{process:{id:{$in:n}}}},_isProjectType:function(e){return"project"===e.toLowerCase()},_isAssignableType:function(e){return i.contains(["epic","feature","userstory","request","bug","task","testplan","testplanrun"],e.toLowerCase())}});e.exports=s},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=i},function(e,t){e.exports=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),a=function(){function e(t){r(this,e),this.config=t}return i(e,[{key:"getConfig",value:function(){return this.config}},{key:"getEntityTypesToInterrupt",value:function(){var e=o.reduce(this.config,function(e,t){return e.concat(o.keys(t.constraints))},[]);return o.uniq(e)}},{key:"getRequiredCFsForState",value:function(e){var t=this.getEntityTypeCFConstraintsRule(e);if(!t)return[];var n=t.entityStates,r=o.filter(n,function(t){return t.name.toLowerCase()===e.requirementsData.newState.name.toLowerCase()});return this._getRequiredCFs(e,r)}},{key:"getRequiredCFsForCFs",value:function(e){var t=this.getEntityCFConstraints(e);if(!t)return[];var n=o.reduce(e.requirementsData.changedCFs,function(e,n){var r=o.filter(t,function(e){return e.name.toLowerCase()===n.name.toLowerCase()&&(e.valueIn?o.some(e.valueIn,function(e){return e===n.value}):o.every(e.valueNotIn,function(e){return e!==n.value}))});return e.concat(r)},[]);return this._getRequiredCFs(e,n)}},{key:"getEntityTypeCFConstraintsRule",value:function(e){var t=this.getProcessCFConstraintsRule(e);return t?t.constraints[e.entity.entityType.name.toLowerCase()]:null}},{key:"getEntityCFConstraints",value:function(e){var t=this.getEntityTypeCFConstraintsRule(e);return t?t.customFields:null}},{key:"getProcessCFConstraintsRule",value:function(e){return o.find(this.config,function(t){return Number(t.processId)===Number(e.processId)})}},{key:"_getRequiredCFs",value:function(e,t){var n=o.reduce(t,function(t,n){var r=o.filter(e.entity.customFields,function(e){return o.find(n.requiredCustomFields,function(t){return e.name.toLowerCase()===t.toLowerCase()&&(!e.value||""===e.value.toString())})});return t.concat(r)},[]);return o.uniq(n)}}]),e}();t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";var r=n(3),i=n(6),o=n(11),a=o.extend({_getInterrupter:function(){return new i},_getChangedEntityId:function(e){return e.id},_getNewState:function(e,t,n){var i=r.find(n,function(t){return t.id===e.id}),o=r.find(i.changes,function(e){return this._shouldChangeBeHandled(e)},this);return this._getStateFromChange(t,o)},_getStateFromChange:function(e,t){if(this._isTeamStateChange(t)){var n=t.value;return r.isArray(n)&&1===n.length&&n[0].entityState?this._getTeamStateFromChange(e,n[0].entityState.id):null}var i=t.value.id;return r.find(e,function(e){return e.id===i})},_getTeamStateFromChange:function(e,t){return r.find(e,function(e){return r.some(e.subEntityStates,function(e){return e.id===t})})}});e.exports=a},function(e,t,n){"use strict";var r=n(5),i=n(3),o=n(12),a=o.extend({_shouldChangeBeHandled:function(e){return e.name&&i.contains(["entitystate","assignedteams","teamentitystate"],e.name.toLowerCase())},_isTeamStateChange:function(e){return e.name&&i.contains(["assignedteams","teamentitystate"],e.name.toLowerCase())},_getEntityRequiredCFs:function(e){return this.requirements.getRequiredCFsForState(e)},_buildEntitiesWithRequirements:function(e,t,n){var i=this.dataProvider.getTeamProjectsPromise(e),o=this.dataProvider.getEntityStatesDetailsPromise(t,e,n),a=this.dataProvider.getTasksDetailsPromise(e);return r.when(i,o,a).then(function(r,i,o){return this._getEntitiesWithRequirements(e,i,t,n,o,r)}.bind(this))},_getEntitiesWithRequirements:function(e,t,n,r,o,a){var u=i.map(e,function(e){var i=[],u=this._getNewState(e,t,n,r,a);if(u){var s={entity:e,processId:this.dataProvider.getEntityProcessId(e,r),requirementsData:{newState:u}};"userstory"===e.entityType.name.toLowerCase()&&u.isFinal&&(i=i.concat(this._getUserStoryTasksToHandle(s,o,t,r))),i.push(s)}return i},this);return i.flatten(u,!0)},_getUserStoryTasksToHandle:function(e,t,n,r){var o=e.entity,a=i.filter(t,function(e){return e.userStory.id==o.id});if(0===a.length)return[];var u=i.find(n,function(t){return t.isFinal&&t.process.id==e.processId&&"task"===t.entityType.name.toLowerCase()});return i.map(a,function(e){return{entity:e,processId:this.dataProvider.getEntityProcessId(e,r),requirementsData:{newState:u}}},this)},_getNewState:function(e,t,n,r,i){this._throwNotImplemented()}});e.exports=a},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=n(3),a=n(8),u=a.extend({init:function(e,t,n){this.dataProvider=e,this.requirements=t,this.requireEntityCFsCallback=n},subscribe:function(){var e=this.requirements.getEntityTypesToInterrupt(),t=this._getInterrupter();o.forEach(e,function(e){t.interruptSave(e,o.bind(function(t,n){var r=this._filterChangesToHandle(n);return 0==r.length?void t.resolve():void this._processChangesToHandle(r,e,t)},this))},this)},_throwNotImplemented:function(){throw new Error("Not implemented")},_getInterrupter:function(){this._throwNotImplemented()},_filterChangesToHandle:function(e){return o.filter(e,o.bind(function(e){return o.some(e.changes,o.bind(function(e){return this._shouldChangeBeHandled(e)},this))&&e.id},this))},_shouldChangeBeHandled:function(e){this._throwNotImplemented()},_processChangesToHandle:function(e,t,n){var r=this._getChangedEntitiesIds(e);i.when(this.dataProvider.getEntitiesDetailsPromise(r,t),this.dataProvider.getDefaultProcessPromise()).then(o.bind(function(t,n){return this._buildEntitiesWithRequirements(t,e,n)},this)).done(o.bind(function(e){this._handleEntitiesRequirements(e,n)},this))},_getChangedEntitiesIds:function(e){return o.map(e,o.bind(function(e){return this._getChangedEntityId(e)},this)).join(",")},_getChangedEntityId:function(e){this._throwNotImplemented()},_buildEntitiesWithRequirements:function(e,t,n){this._throwNotImplemented()},_handleEntitiesRequirements:function(e,t){var n=o.bind(function(e,r){var i=r||0,o=e[i];if(!o)return void t.resolve();var a=this._getEntityRequiredCFs(o);return 0==a.length?void n(++i):void this._requireEntityCFs(o,a).done(function(){n(++i)}).fail(t.reject)},this,e);n()},_requireEntityCFs:function(e,t){var n=new i.Deferred;return this.requireEntityCFsCallback(r({},e,{customFields:t}),n),n.promise()}});e.exports=u},function(e,t,n){"use strict";var r=n(3),i=n(6),o=n(14),a=o.extend({init:function(e,t,n){this._super(e,t,n)},_getInterrupter:function(){return new i},_shouldChangeBeHandled:function(e){return e.name&&"customfields"===e.name.toLowerCase()},_getChangedEntityId:function(e){return e.id},_getCFsChanges:function(e,t){var n=r.find(t,function(t){return t.id==e.id}),i=r.reduce(n.changes,function(e,t){return this._shouldChangeBeHandled(t)?e.concat(t.value):e},[],this);return r.filter(i,function(t){return r.find(e.customFields,function(e){return t.name==e.name&&t.value!=e.value})})}});e.exports=a},function(e,t,n){"use strict";var r=n(5),i=n(3),o=n(12),a=o.extend({init:function(e,t,n){this._super(e,t,n)},_getEntityRequiredCFs:function(e){return this.requirements.getRequiredCFsForCFs(e)},_buildEntitiesWithRequirements:function(e,t,n){var o=r.Deferred(),a=i.map(e,function(e){return{entity:e,processId:this.dataProvider.getEntityProcessId(e,n),requirementsData:{changedCFs:this._getCFsChanges(e,t)}}},this);return o.resolve(a),o.promise()}});e.exports=a},function(e,t,n){"use strict";var r=n(3),i=n(16),o=n(11),a=n(17),u=o.extend({init:function(e,t,n){this._super(e,t,n),this.sliceDecoder=new a},_getInterrupter:function(){return new i},_getChangedEntityId:function(e){return this.sliceDecoder.decode(e.id)},_getNewState:function(e,t,n,i,o){var a=r.find(n,function(t){return parseInt(this.sliceDecoder.decode(t.id))===e.id},this);return this._getEntityState(e,t,a.changes,i,o)},_getEntityState:function(e,t,n,i,o){var a=r.find(n,function(e){return this._shouldChangeBeHandled(e)},this);if(!a)return null;var u=this.sliceDecoder.decode(a.value);return this._isTeamStateChange(a)?this._getTeamState(u,e,t,o):r.find(t,function(t){return t.process.id===this.dataProvider.getEntityProcessId(e,i)&&t.entityType.name===e.entityType.name&&this.isStateEqual(u,t)},this)},_getTeamState:function(e,t,n,i){if(r.isEmpty(t.assignedTeams))return null;var o=r.compact(r.map(t.assignedTeams,function(e){var n=e.team.id,o=r.find(i,function(e){return e.project.id===t.project.id&&e.team.id===n});return o?r.find(o.workflows,function(e){return e.entityType.name===t.entityType.name}).id:null}));return r.find(n,function(t){return this.isProperState(e,t,o)?!0:r.some(t.subEntityStates,function(t){return this.isProperState(e,t,o)}.bind(this))}.bind(this))},isProperState:function(e,t,n){return r.contains(n,t.workflow.id)&&this.isStateEqual(e,t)},isStateEqual:function(e,t){var n=e.toLowerCase();return n===t.name.toLowerCase()||"_initial"===n&&t.isInitial||"_final"===n&&t.isFinal||"_planned"===n&&t.isPlanned}});e.exports=u},function(e,t){e.exports=a},function(e,t){"use strict";var n=function(){};n.prototype={decode:function(e){if(0!==e.indexOf("b64_"))return e;var t=e;return t=t.replace(/_0/g,"+"),t=t.replace(/_1/g,"/"),t=t.replace(/_2/g,"="),t=t.substring(4,t.length-1),this._decodeBase64(t)},_decodeBase64:function(e){var t,n,r={},i=[],o="",a=String.fromCharCode,u=[[65,91],[97,123],[48,58],[43,44],[47,48]];for(n in u)for(t=u[n][0];t<u[n][1];t++)i.push(a(t));for(t=0;64>t;t++)r[i[t]]=t;for(t=0;t<e.length;t+=72){var s,c,l=0,f=0,p=e.substring(t,t+72);for(c=0;c<p.length;c++)for(s=r[p.charAt(c)],l=(l<<6)+s,f+=6;f>=8;)o+=a((l>>>(f-=8))%256)}return o.replace(/[^\w\s]/gi,"")}},e.exports=n},function(e,t,n){"use strict";var r=n(3),i=n(16),o=n(14),a=n(17),u=o.extend({CUSTOM_FIELD_NO_VALUE_STRING:"na",CUSTOM_FIELD_CHANGE_ID_PREFIX_REGEX:/^ddl/,init:function(e,t,n){this._super(e,t,n),this.sliceDecoder=new a},_getInterrupter:function(){return new i},_shouldChangeBeHandled:function(e){return e.name&&this.CUSTOM_FIELD_CHANGE_ID_PREFIX_REGEX.test(e.name.toLowerCase())},_getChangedEntityId:function(e){return this.sliceDecoder.decode(e.id)},_getCFsChanges:function(e,t){var n=r.find(t,function(t){return parseInt(this.sliceDecoder.decode(t.id))===e.id},this),i=r.reduce(n.changes,function(e,t){return this._shouldChangeBeHandled(t)?e.concat({name:this._getCFNameFromChange(t),value:this._getCFValueFromChange(t)}):e},[],this);return r.filter(i,function(t){return r.find(e.customFields,function(e){return t.name.toLowerCase()==e.name.toLowerCase()&&t.value!=e.value})})},_getCFNameFromChange:function(e){return e.name.replace(this.CUSTOM_FIELD_CHANGE_ID_PREFIX_REGEX,"")},_getCFValueFromChange:function(e){var t=this.sliceDecoder.decode(e.value);return t!==this.CUSTOM_FIELD_NO_VALUE_STRING?t:null}});e.exports=u},function(e,t,n){"use strict";var r=n(5),i=n(3),o=n(20),a=n(8),u=n(21),s=n(23),c=n(24),l=a.extend({init:function(e,t){this.requirements=t,this.dataProvider=e,this.cfProcessor=new u(this.requirements),this.stateProcessor=new s(this.requirements),this.cascadeTracker=new c(this.requirements),this.quickAddComponents=[{componentName:"board.cell.quick.add"},{componentName:"board cell quick add"},{componentName:"board axis quick add"},{componentName:"board plus quick add general"},{componentName:"board plus quick add cells"},{componentName:"board general quick add"},{componentName:"entity quick add",doNotWaitSettingsReady:!0}]},subscribe:function(){i.forEach(this.quickAddComponents,function(e){this._subscribeComponent(e)},this)},_subscribeComponent:function(e){var t=new o(e.componentName),n=e.doNotWaitSettingsReady?"":" + settings.ready",r={};r["bus afterInit:last + before_dataBind"+n]=i.bind(this._readyToModifyBindData,this),r["bus afterRender"]=i.bind(this._readyToTrackCascadeCFs,this,t),t.flow(r,this)},_readyToModifyBindData:function(e,t,n,o){e.before_dataBind.suspendMain();var a=t.config.context.configurator;this._getContextPromise(a).done(i.bind(function(u){var s=u.processes,c=i.map(s,function(e){return e.id}),l=i.keys(n.types);r.when(this.dataProvider.getEntityStatesForTypesAndProcessesPromise(a,l,c),this.dataProvider.getCustomFieldsForTypesAndProcessesPromise(a,l,c)).done(i.bind(function(r,i){var a=this._buildRequiredCFsToModify({afterInitEvtArg:t,dataBindEvtArg:n,settingsReadyEvtArg:o},{entityTypes:l,processes:s,customFields:i,entityStates:r});this._modifyBindData(n,a),e.before_dataBind.resumeMain()},this))},this))},_readyToTrackCascadeCFs:function(e,t){this.cascadeTracker.track(t.data.element,function(){e.fire("adjustPosition")})},_getContextPromise:function(e){var t=r.Deferred();return e.getAppStateStore().get({fields:["acid"],callback:i.bind(function(n){e.getApplicationContextService().getApplicationContext({acid:n.acid},{success:i.bind(function(e){t.resolve(e)}),failure:i.bind(function(e){t.reject(e)})})},this)}),t.promise()},_buildRequiredCFsToModify:function(e,t){var n=this.stateProcessor.getChangedValue(e.afterInitEvtArg,e.settingsReadyEvtArg),r=this.cfProcessor.getChangedValue(e.afterInitEvtArg,e.settingsReadyEvtArg),o=[];i.forEach(t.processes,function(a){i.forEach(t.entityTypes,function(u){var s=i.filter(t.customFields,function(e){return e.processId==a.id&&e.entityTypeName.toLowerCase()==u.toLowerCase()});o=o.concat(this.stateProcessor.getCFs(n,t.entityStates,a,u,e.dataBindEvtArg,s)),o=o.concat(this.cfProcessor.getCFs(r,t.entityStates,a,u,e.dataBindEvtArg,s))},this)},this);var a=i.filter(t.customFields,function(e){return e.required}),u=this.cascadeTracker.buildCascadeCFs(o.concat(a),t.customFields);return i.compact(o.concat(u))},_modifyBindData:function(e,t){i.forEach(t,function(t){e.types[t.entityTypeName].template.items.push(this._createCFDataBindConfig(t))},this)},_createCFDataBindConfig:function(e){return{caption:e.name,config:{calculationModel:"",calculationModelContainsCollections:null,defaultValue:"",resourceType:"CustomFieldConfig",units:""},fieldType:e.fieldType,id:"CustomFields",options:e.value?{value:e.value}:{},processId:e.processId,required:!0,type:"CustomField"}}});e.exports=l},function(e,t){e.exports=u},function(e,t,n){"use strict";var r=n(3),i=n(22),o=i.extend({_getAxisValueName:function(){return"ddl"},_getAxisDefaultValue:function(){return null},_getNewAxisValue:function(e,t){return{name:e.substring(3),value:this.sliceDecoder.decode(t)}},_getRequiredCFs:function(e,t,n,i,o){return this.requirements.getRequiredCFsForCFs({entity:{entityType:{name:i},customFields:r.map(o,function(e){return{name:e.name,value:e.config.defaultValue}})},processId:n.id,requirementsData:{changedCFs:[e]}})}});e.exports=o},function(e,t,n){"use strict";var r=n(3),i=(n(6),n(20),n(17)),o=(n(9),n(8)),a=o.extend({init:function(e){this.requirements=e,this.sliceDecoder=new i},getCFs:function(e,t,n,i,o,a){if(!e)return[];var u=this._getRequiredCFs(e,t,n,i,a),s=[];return u.length>0&&r.forEach(u,function(e){var t=r.find(a,function(t){return t.name.toLowerCase()==e.name.toLowerCase()});t.required||s.push(t)},this),s},getChangedValue:function(e,t){var n=this._getSliceDefinition(e);return n&&t?this._getAxisName(e,n,t,"x")||this._getAxisName(e,n,t,"y")||this._getAxisDefaultValue():this._getAxisDefaultValue()},_getRequiredCFs:function(e,t,n,r,i){},_getAxisValueName:function(){},_getAxisDefaultValue:function(){},_getNewAxisValue:function(e,t){},_getAxisName:function(e,t,n,i){var o=this._getAxisValueName();if(t[i]&&!this._compareArrays(t[i].types,n.types)){var a=!Boolean(e.config.options.action),u=void 0,s=void 0;if(a?(s=i,u=r.last(e.config.options.path)||""):e.config.options.action[i]&&(s=r.find(t[i].types,function(e){return 0==e.toLowerCase().indexOf(o)}),u=e.config.options.action[i]),s)return this._getNewAxisValue(s,u)}return null},_getSliceDefinition:function(e){return e.config.options&&e.config.options.slice?e.config.options.slice.config.definition:null},_compareArrays:function(e,t){var n=function(e){return r.map(e,function(e){return e.name.toLowerCase()})},i=n(t);return e.length==t.length&&r.every(e,function(e){return r.contains(i,e.toLowerCase())})}});e.exports=a},function(e,t,n){"use strict";var r=n(3),i=n(22),o=i.extend({init:function(e){this._super(e),this.initialState="_initial",this.finalState="_final",this.plannedState="_planned"},_getRequiredCFs:function(e,t,n,i,o){var a=[],u=this._getState(e,t,n,i);return u&&(a=this.requirements.getRequiredCFsForState({entity:{entityType:{name:i},customFields:r.map(o,function(e){return{name:e.name,value:e.config.defaultValue}})},processId:n.id,requirementsData:{newState:u}})),a},_getState:function(e,t,n,i){return r.find(t,function(t){return(t.isInitial&&e.toLowerCase()==this.initialState||t.isFinal&&e.toLowerCase()==this.finalState||t.isPlanned&&e.toLowerCase()==this.plannedState||t.name.toLowerCase()==e.toLowerCase())&&t.entityType.name.toLowerCase()==i.toLowerCase()&&t.process.id==n.id},this)},_getAxisValueName:function(){return"entitystate"},_getAxisDefaultValue:function(){return this.initialState},_getNewAxisValue:function(e,t){return this.sliceDecoder.decode(t)}});e.exports=o},function(e,t,n){"use strict";var r=n(5),i=n(3),o=n(8),a=n(25),u=o.extend({init:function(e){this._requirements=e,this._cascadeCFConstraintsGraph=null,this._cascadeCFs=[],this._$quickAddElement=null},buildCascadeCFs:function(e,t){this._cascadeCFs=[],this._cascadeCFConstraintsGraph=new a(e,this._requirements.getConfig(),this._mapDefaultValues(t),i.bind(this._cascadeCFChangedHandler,this));var n,r,o,u,s,c,l=this._cascadeCFConstraintsGraph.getVerticesWrapped();for(n in l.processes)for(r in l.processes[n].entityTypes)o=l.processes[n].entityTypes[r].cfs,i.forEach(o,function(i){u=i.getId().toLowerCase(),s=this._isRootCF(e,u,n,r),s||(c=this._findCFDefinition(t,u,n,r),this._cascadeCFs.push(c))},this);return this._cascadeCFs},track:function(e,t){0!==this._cascadeCFs.length&&(this._positionShouldBeAdjustedHandler=t,this._$quickAddElement=e,this._actualizeCascadeCFsElements(),this._bindGraphToCFsChanges(),this._cascadeCFs=[])},_mapDefaultValues:function(e){var t={};return i.forEach(e,function(e){t[e.name]=e.config.defaultValue}),t},_cascadeCFChangedHandler:function(e,t,n){this._toggleCFElement(e,t,n.id,n.value,n.isValid)},_isCF:function(e,t,n,r){return e.name.toLowerCase()===t&&e.processId==n&&e.entityTypeName.toLowerCase()===r.toLowerCase()},_isRootCF:function(e,t,n,r){return!!i.find(e,function(e){return this._isCF(e,t,n,r)},this)},_findCFDefinition:function(e,t,n,r){return i.find(e,function(e){return this._isCF(e,t,n,r)},this)},_toggleCFElement:function(e,t,n,r,i){var o=this._findCFElement(e,t,n);o.val(this._buildCFElementValue(o,r,i)).toggleClass("placeholder",!i).parent().toggle(!!i),this._positionShouldBeAdjustedHandler&&this._positionShouldBeAdjustedHandler()},_findCFElement:function(e,t,n){return this._$quickAddElement?this._$quickAddElement.find(".cf-wrap.cf-process_"+e).find(".tau-required-field-editor").filter('[data-fieldname="'+n+'"]'):r()},_buildCFElementValue:function(e,t,n){return 0!==e.length&&t&&n?"multipleselectionlist"===e.data("fieldtype").toLowerCase()?t.split(","):t:null},_actualizeCascadeCFsElements:function(){var e=this._cascadeCFConstraintsGraph.getVerticesWrapped();i.forEach(this._cascadeCFs,function(t){e.processes[t.processId].entityTypes[t.entityTypeName.toLowerCase()].cfs[t.name].isValid()||this._toggleCFElement(t.processId,t.entityTypeName,t.name)},this)},_getQuickAddFieldValue:function(e){return this._$quickAddElement.find('[data-fieldname="'+e+'"]').find("option:selected").data("option")||{}},_bindGraphToCFsChanges:function(){this._$quickAddElement.on("change",'[data-iscf="true"]',i.bind(function(e){var t=r(e.target),n=t.data("fieldname"),i=this._$quickAddElement.find(".quick-add__entity-items").find("button.tau-active").data("type").toLowerCase(),o="project"===i?this._getQuickAddFieldValue("Process").id:this._getQuickAddFieldValue("Project").processId,a=this._getCFValueFromElement(t);this._cascadeCFConstraintsGraph.setCFValue(o,i,n,a)},this))},_getCFValueFromElement:function(e){var t=e.val();return i.isArray(t)?t.join(","):t}});e.exports=u},function(e,t,n){"use strict";function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),s=function(){function e(t,n,r,o){i(this,e),this._cfConstraintsConfig=n,this._onVertexIsValidChangeCallback=o,this._defaultValues=r,this._verticesWrapped=this._buildGraph(t)}return a(e,[{key:"getVerticesWrapped",value:function(){return this._verticesWrapped}},{key:"setCFValue",value:function(e,t,n,r){if(this._verticesWrapped.processes[e]&&this._verticesWrapped.processes[e].entityTypes[t]){var i=this._verticesWrapped.processes[e].entityTypes[t].cfs[n];i&&(i.setValue(r),this._breadthFirstUpdateVertexValidity(i))}}},{key:"_buildGraph",value:function(e){var t=this._buildCFsTree(e),n={processes:{}};for(var r in t)n.processes[r]=this._buildProcessVertexWrapped(t,r,u.bind(this._onVertexIsValidChangeCallback,this,r));return n}},{key:"_buildCFsTree",value:function(e){return u.reduce(e,function(e,t){var n=t.entityTypeName.toLowerCase();return e[t.processId]=e[t.processId]||{},e[t.processId][n]=e[t.processId][n]||{},e[t.processId][n][t.name]=t,e},{})}},{key:"_buildProcessVertexWrapped",value:function(e,t,n){var r={vertex:new c(t,!0),entityTypes:{}},i=u.find(this._cfConstraintsConfig,function(e){return e.processId==t}),o=e[t];for(var a in o){var s=i?i.constraints[a.toLowerCase()]:null,l=this._buildEntityTypeVertexWrapped(o,a,s,u.bind(n,this,a)),d=new f(r.vertex,l.vertex,new p);r.entityTypes[a]=l,r.vertex.getOutEdges().push(d),l.vertex.getInEdges().push(d)}return r}},{key:"_buildEntityTypeVertexWrapped",value:function(e,t,n,r){var i={vertex:new c(t,!0),cfs:{}},o=n?n.customFields||[]:[],a=e[t],u={};for(var s in a){var l=this._buildRootCFVertex(a[s],r),d=new f(i.vertex,l,new p);u[l.getId()]=l,i.vertex.getOutEdges().push(d),l.getInEdges().push(d)}return i.cfs=this._buildCFVertices(u,o,r),i}},{key:"_buildRootCFVertex",value:function(e,t){return new l(e.name,!0,t,e.config.defaultValue)}},{key:"_buildCFVertices",value:function(e,t,n){var r=u.extend({},e);if(u.isEmpty(r))return r;for(var i,o=u.map(r,function(e){return e.getId()}),a=o.shift();a;){var s=this._getVertexConstraintsFiltered(t,a),c=r[a];u.forEach(s,function(e){u.forEach(e.requiredCustomFields,function(t){var a=this._getOrCreateOutVertex(r,t,n),u=this._createEdgeValidityConstraint(e),s=new f(c,a,u);this._ensureOutVertexActualValidity(a,s),c.getOutEdges().push(s),a.getInEdges().push(s),i=a.getId(),r[i]||(r[i]=a,o.push(i))},this)},this),a=o.shift()}return r}},{key:"_getVertexConstraintsFiltered",value:function(e,t){return u.filter(e,u.bind(function(e,t){return t.name.toLowerCase()===e.toLowerCase()},this,t))}},{key:"_getOrCreateOutVertex",value:function(e,t,n){var r=this._defaultValues[t]||null;return e[t]||new l(t,!1,n,r)}},{key:"_createEdgeValidityConstraint",value:function(e){return e.valueIn?new v(e.valueIn):new h(e.valueNotIn)}},{key:"_ensureOutVertexActualValidity",value:function(e,t){!e.isValid()&&t.isValid()&&e.setIsValid(!0)}},{key:"_breadthFirstUpdateVertexValidity",value:function(e){var t=e.getOutEdges().slice();if(0!==t.length){var n,r,i,o,a=t.shift(),u={};for(u[e.getId()]=e;a;)n=a.getOutVertex(),r=n.getId(),u[r]||(u[r]=n,i=n.isValid(),o=n.isValidByEdges(),i!==o&&(n.setIsValid(o),Array.prototype.push.apply(t,n.getOutEdges()))),a=t.shift()}}}]),e}(),c=function(){function e(t,n){i(this,e),this._id=t,this._isValid=n,this._inEdges=[],this._outEdges=[]}return a(e,[{key:"getId",value:function(){return this._id}},{key:"isValid",value:function(){return this._isValid}},{key:"isValidByEdges",value:function(){return!!u.find(this._inEdges,function(e){return e.isValid()})}},{key:"setIsValid",value:function(e){this._isValid=e}},{key:"getInEdges",value:function(){return this._inEdges}},{key:"getOutEdges",value:function(){return this._outEdges}}]),e}(),l=function(e){function t(e,n,r,a){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,r),this._onIsValidChange=r,this._value=a}return r(t,e),a(t,[{key:"setIsValid",value:function(e){o(Object.getPrototypeOf(t.prototype),"setIsValid",this).call(this,e),this._onIsValidChange({id:this._id,isValid:this._isValid,value:this._value})}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(e){this._value=e}}]),t}(c),f=function(){function e(t,n,r){
i(this,e),this._inVertex=t,this._outWertex=n,this._validityConstraint=r}return a(e,[{key:"getInVertex",value:function(){return this._inVertex}},{key:"getOutVertex",value:function(){return this._outWertex}},{key:"isValid",value:function(){return this._validityConstraint.isValid(this)}}]),e}(),p=function(){function e(){i(this,e)}return a(e,[{key:"isValid",value:function(e){return e.getInVertex().isValid()}}]),e}(),d=function(e){function t(e){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this._inVertexValues=e}return r(t,e),a(t,[{key:"_hasValue",value:function(e){for(var t=0,n=this._inVertexValues.length;n>t;t++){var r=this._inVertexValues[t];if(!r&&!e||r==e)return!0}return!1}}]),t}(p),v=function(e){function t(e){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return r(t,e),a(t,[{key:"isValid",value:function(e){return o(Object.getPrototypeOf(t.prototype),"isValid",this).call(this,e)&&this._hasValue(e.getInVertex().getValue())}}]),t}(d),h=function(e){function t(e){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return r(t,e),a(t,[{key:"isValid",value:function(e){return o(Object.getPrototypeOf(t.prototype),"isValid",this).call(this,e)&&!this._hasValue(e.getInVertex().getValue())}}]),t}(d);e.exports=s},function(e,t,n){"use strict";var r=n(3),i=n(27),o=n(28),a=n(29),u=n(30),s=n(31),c=n(49),l=n(50),f=[{pattern:/cfConstraints/,host:{name:"master empty",type:"master.empty"},type:{name:"cf constraints",type:"cf.constraints",namespace:"tau/cf.constraints"}}],p=function(e,t){return r.map(e.customFields,function(n){return r.find(t.processes[0].customFields,function(t){return t.entityKind.toLowerCase()==e.entity.entityType.name.toLowerCase()&&t.name==n.name})})};e.exports=function(e){e.addTargetprocessModule("tau/cf.constraints/components/component.cf.constraints",s);var t=new i,n=new a(t);n.getApplicationContext({ids:[e.entity.id]},{success:function(n){e.customFields=p(e,n);var i=e.placeholder,a="cf.constraints";t._id=r.uniqueId("cf.constraints"),t.registerService("navigator",new o(t,{parameterName:a})),t.registerService("cf.constraints.config",r.extend(e,{applicationContext:n})),t.getExternal().setFakeWindow(),t.getHashService().getHash()||t.service("navigator").to("cfConstraints");var s={name:"cf constraints",options:{applicationId:a,placeholder:i,integration:{showInPopup:!0,cssClass:"cf-constraints-popup",keepAlive:!1}},routes:f,context:{configurator:t},extensions:[c,l]},d=u.create(s);d.initialize(s)}})}},function(e,t){e.exports=s},function(e,t){e.exports=c},function(e,t){e.exports=l},function(e,t){e.exports=f},function(e,t,n){"use strict";var r=n(32),i=n(33),o=n(36);e.exports={create:function(e){var t={name:"cf constraints page component",extensions:[i],ViewType:o};return r.create(t,e)}}},function(e,t){e.exports=p},function(e,t,n){"use strict";var r=n(3),i=n(34),o=n(6),a=n(35);e.exports=i.extend({"bus afterInit + afterRender":function(e,t,n){var r=t.config.context.configurator.service("cf.constraints.config");this._bindSave(r,n.element),this._bindRefreshOnFailure(r,t.config.context.configurator)},_bindSave:function(e,t){var n=t.find(".i-role-save");n.click(r.bind(function(n){n.preventDefault(),(new o).getEntity().ofType(e.entity.entityType.name).withId(e.entity.id).withFieldSetRestrictedTo(["customFields"]).withCallOnDone(r.bind(function(e,t,n,i){var o=r.filter(t,function(e){var t=r.find(i.customFields,function(t){return t.name==e.name});return"undefined"!=typeof t&&null!=t.value&&""!=t.value});o.length==t.length?n.resolve():e.find(".ui-customfield__value:empty").addClass("ui-validationerror")},this,t,e.customFields,e.entityDeferred)).execute()},this))},_bindRefreshOnFailure:function(e,t){t.getStore().on({eventName:"failure",listener:this},r.bind(function(e){r.each(e,function(e){a.getByName("customField-"+e.name).done(function(e){e.fire("refreshRow")})})},this,e.customFields))}})},function(e,t){e.exports=d},function(e,t){e.exports=v},function(e,t,n){"use strict";var r=n(3),i=n(37),o=n(38),a=n(39),u=n(40);e.exports=i.extend({init:function(e){this._super(e)},initialize:function(){},"bus beforeInit":function(){var e=this.config.context.configurator;e.getTitleManager().setTitle("CF Constraints");var t=e.service("cf.constraints.config"),n=this.config;this.setCustomFieldService(e,t);var i=r.extend(n,(new u).getConfig(t));this.container=o.create({name:"cf constraints page container",layout:i.layout,template:i.template,extensions:r.union([],i.extensions||[]),context:r.extend(n.context,{getCustomFields:function(){return t.customFields},entity:t.entity,applicationContext:t.applicationContext})}),this.container.on("afterInit",this["container afterInit"],this),this.container.on("afterRender",this["container afterRender"],this),this.container.on("componentsCreated",this["container componentsCreated"],this),this.container.initialize(i)},"container afterInit":function(){this.fireAfterInit()},"container componentsCreated":function(e){this.fire(e.name,e.data)},"container afterRender":function(e){this.fireBeforeRender(),this.element=e.data.element,this.fireAfterRender()},setCustomFieldService:function(e,t){this._customFieldsService=new a({configurator:e,entity:t.entity,customFields:t.customFields}),e.registerService("customFieldServiceV2",this._customFieldsService)},lifeCycleCleanUp:function(){this.destroyContainer(),this._super()},destroyContainer:function(){this.container&&(this.container.destroy(),this.container=null)},destroy:function(){this._customFieldsService&&this._customFieldsService.destroy(),this.destroyContainer(),this._super()}})},function(e,t){e.exports=h},function(e,t){e.exports=y},function(e,t){e.exports=m},function(e,t,n){"use strict";var r=n(3),i=n(8),o=n(41),a=n(43),u=n(47),s=i.extend({getConfig:function(e){e.addTargetprocessModule("tau/cf.constraints/components/component.cf.constraints.header",a),e.addTargetprocessModule("tau/cf.constraints/components/component.cf.constraints.save",u);var t=r.map(e.customFields,function(e){var t=e.type.toLowerCase();switch(t){case"multipleselectionlist":return this._getEditorConfig(e,"multiselect");case"richtext":return this._getRichTextEditorConfig(e);default:return this._getEditorConfig(e,t)}}.bind(this));return t.push({selector:".i-role-entity-name",namespace:"tau/cf.constraints",type:"cf.constraints.header"}),t.push({selector:".i-role-save",namespace:"tau/cf.constraints",type:"cf.constraints.save"}),{layout:"selectable",template:o,children:t}},_getEditorConfig:function(e,t,n){return{selector:n||".i-role-customFields",type:"customField."+t,customField:e,name:"customField-"+e.name}},_getRichTextEditorConfig:function(e){return{type:"container",name:"customField-"+e.name+"-container",selector:".i-role-customFields",template:{name:"cf.constraints.richText",markup:['<div class="ui-customfield  ui-customfield_empty_true ui-customfield_editable_true cf-constraints-richText">',"<table><tbody><tr>",'<td class="ui-customfield__label">',e.name,"</td>",'<td class="ui_custom_field_value_container i-role-richText"></td>',"</tr></tbody></table>","</div>"]},layout:"selectable",children:[this._getEditorConfig(e,"richtext",".i-role-richText")]}}});e.exports=s},function(e,t,n){"use strict";var r=n(42),i={name:"cf.constraints",engine:"jqote2",markup:['<div class="cf-constraints-container tau-page-entity main-container">','<div class="cf-constraints-entity-name tau-entity-caption i-role-entity-name"></div>','<div class="cf-constraints-note">Please specify the following custom fields</div>','<div class="cf-constraints-customFields i-role-customFields"></div>','<div class="cf-constraints-save i-role-save"></div>',"</div>"]};e.exports=r.register(i)},function(e,t){e.exports=g},function(e,t,n){"use strict";var r=n(44),i=n(45),o=n(46);e.exports={create:function(e){var t={extensions:[i],template:o};return r.create(t,e)}}},function(e,t){e.exports=b},function(e,t,n){"use strict";var r=n(34);e.exports=r.extend({"bus afterInit":function(e,t){this.fire("dataBind",{entity:t.config.context.entity})}})},function(e,t,n){"use strict";var r=n(42),i={name:"cf.constraints.header",engine:"jqote2",markup:["<div>",'<em class="ui-type-icon ui-type-icon-<%! this.entity.entityType.name.toLowerCase() %>"><%! this.entity.id %></em>',"<%! this.entity.name %>","</div>"]};e.exports=r.register(i)},function(e,t,n){"use strict";var r=n(44),i=n(45),o=n(48);e.exports={create:function(e){var t={extensions:[i],template:o};return r.create(t,e)}}},function(e,t,n){"use strict";var r=n(42),i={name:"cf.constraints.save",engine:"jqote2",markup:["<div>",'<div class="i-role-error-message" style="display: none;">Please enter all custom fields</div>','<div><button type="button" class="tau-btn tau-primary i-role-save">Save and Continue</button></div>',"</div>"]};e.exports=r.register(i)},function(e,t){e.exports=_},function(e,t,n){"use strict";var r=n(3),i=n(34),o=n(6);e.exports=i.extend({"bus afterInit + $popup.ready":function(e,t,n){n.tauPopup("option",{enableClose:!1});var i=t.config.context.configurator.service("cf.constraints.config"),o=r.bind(this._reset,this,i),a=n.tauPopup("widget").find(".close");i.entityDeferred.done(r.bind(this._exit,this)),n.tauPopup({show:r.bind(function(e,t){e.off("click"),e.on("click",r.bind(function(e){e.preventDefault(),t()},this))},this,a,o)})},"bus afterInit > destroy":function(e,t,n){n&&n.doNotReset||this._reset(t.config.context.configurator.service("cf.constraints.config"))},_exit:function(){this.fire("destroy",{doNotReset:!0})},_reset:function(e){var t={customFields:r.map(e.customFields,function(e){return{name:e.name,type:e.type,value:null}},this)};(new o).updateEntity().ofType(e.entity.entityType.name).withId(e.entity.id).usingFieldValues(t).withCallOnDone(r.bind(function(){e.entityDeferred.reject({response:{Message:"The changes were not saved as you didn't fill out the required custom fields"},status:400}),this._exit()},this)).execute()}})},function(e,t,n){var r=n(52);"string"==typeof r&&(r=[[e.id,r,""]]);n(54)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(53)(),t.push([e.id,".cf-constraints-popup{position:fixed;top:50%;left:50%;right:inherit;bottom:inherit;margin-top:-200px;margin-left:-300px;width:530px;font-family:Arial,sans-serif;font-size:12px}.cf-constraints-container{max-height:400px;overflow:auto}.cf-constraints-entity-name{padding:0 10px;margin-bottom:10px}.cf-constraints-entity-name .ui-type-icon{margin-right:5px}.cf-constraints-customFields{padding-bottom:15px}.cf-constraints-note{color:#606B73;padding:10px;background-color:#FFFFE1;margin-bottom:5px}.cf-constraints-save{margin-left:8px;margin-top:10px}.cf-constraints-customFields .ui_custom_field_value_container{border:1px solid #CCC;border-radius:3px!important}.cf-constraints-customFields .ui-customfield{margin-bottom:5px}.cf-constraints-customFields .ui-customfield_editable_true:hover .ui-customfield__label{background:#fff}.cf-constraints-customFields .ui-customfield-richtext .ui-customfield__value.editable:hover{background:#FFFFE1}.cf-constraints-richText .ui_custom_field_value_container{padding:0}.cf-constraints__formrow{display:flex;margin-bottom:5px;margin-left:10px;align-items:baseline}.cf-constraints__label{width:100px;color:#999}.cf-constraints__formrow>input,.cf-constraints__formrow>select{flex:1 1 auto}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=f[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(u(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(u(r.parts[o],t));f[r.id]={id:r.id,refs:1,parts:a}}}}function i(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],u=i[2],s=i[3],c={css:a,media:u,sourceMap:s};n[o]?n[o].parts.push(c):t.push(n[o]={id:o,parts:[c]})}return t}function o(){var e=document.createElement("style"),t=v();return e.type="text/css",t.appendChild(e),e}function a(){var e=document.createElement("link"),t=v();return e.rel="stylesheet",t.appendChild(e),e}function u(e,t){var n,r,i;if(t.singleton){var u=y++;n=h||(h=o()),r=s.bind(null,n,u,!1),i=s.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=a(),r=l.bind(null,n),i=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=o(),r=c.bind(null,n),i=function(){n.parentNode.removeChild(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function s(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=m(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function c(e,t){var n=t.css,r=t.media;t.sourceMap;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function l(e,t){var n=t.css,r=(t.media,t.sourceMap);r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var f={},p=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},d=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=p(function(){return document.head||document.getElementsByTagName("head")[0]}),h=null,y=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=d());var n=i(e);return r(n,t),function(e){for(var o=[],a=0;a<n.length;a++){var u=n[a],s=f[u.id];s.refs--,o.push(s)}if(e){var c=i(e);r(c,t)}for(var a=0;a<o.length;a++){var s=o[a];if(0===s.refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete f[s.id]}}}};var m=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(57),o=r(i);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},l=n(55),f=r(l),p=n(3),d=n(58),v=r(d),h=n(62),y=r(h),m=n(64),g=r(m),b=n(65),_=n(66),C=r(_),O=n(79),x=r(O),w=n(104),j=n(106),P=function(e,t,n){return p.object(e.map(function(e){return[e[t],e[n]]}))},F=function(e,t){return g["default"].get("CustomField",{take:1e3,where:"process.id == "+e+" and entityType.id == "+t.entityType.id,select:"new(required, name, id, config, fieldType, value, entityType, process)"})},E=function(e,t){var n=e.customFields,r=p.find(n,function(e){return e.name.toLowerCase()===t.name.toLowerCase()});return r?b.transformFromServerFieldValue(t,r.value):void 0},T=function(e,t){var n=p.object(e.map(function(e){return[e.name.toLowerCase(),e]}));return t.reduce(function(e,t){return n[t.toLowerCase()]?e.concat(n[t.toLowerCase()]):e},[])},k=function(e,t){return E(e,t)||t.config.defaultValue},S=function(e,t,n){var r=n.name,i=k(e,n),o=p.has(t,n.name),a=t[n.name],u=o?a:i,s=b.validateFieldValue(n,u),c=Boolean(s.length);return{name:r,field:n,hasDirtyValue:o,hasErrors:c,validationErrors:s,value:u}},I=function(e){function t(){var e=this;o(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.state={defaultValues:{},isLoading:!0,onAfterSave:p.noop,onCancel:p.noop,values:{}},this.handleSubmit=function(t){var n=e.props.entity,r=t.every(function(e){var t=e.field,n=e.value;return!b.validateFieldValue(t,b.sanitizeFieldValue(t,n)).length});if(r){var i={customFields:t.map(function(e){var t=e.field,n=e.value,r=e.name;return{name:r,value:b.transformToServerFieldValue(t,b.sanitizeFieldValue(t,n))}})};e.setState(u({},e.state,{isSaving:!0})),y["default"].save(n.entityType.name,n.id,i).then(function(){return e.setState(u({},e.state,{isSaving:!1}))}).then(e.props.onAfterSave).fail(function(t){var n=t.responseJSON;n&&n.Message?e.setState(u({},e.state,{globalError:n.Message,isSaving:!1})):e.setState(u({},e.state,{globalError:"Error while saving",isSaving:!1}))})}},this.handleChange=function(t,n){var r=u({},e.state.values,i({},t.name,n));e.setState(u({},e.state,{values:r}))}}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.processId,r=t.entity;F(n,r).then(function(t){var n=t.map(function(e){return b.transformFieldFromServer(e)}),r=P(n,"name","defaultValue");e.setState({isLoading:!1,allEntityCustomFields:n,defaultValues:r})})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.globalError,r=e.isSaving;if(t)return null;var i=this.props.entity,o=this.getCustomFields();return o.length?f["default"].createElement(v["default"],{onClose:this.props.onCancel},f["default"].createElement(x["default"],{className:w.header,entity:i}),f["default"].createElement("div",{className:w.note},"Please specify the following custom fields"),n?f["default"].createElement("div",{className:w.error},n):null,f["default"].createElement(C["default"],{entity:i,fields:o,onChange:this.handleChange,onSubmit:this.handleSubmit,showProgress:r})):null}},{key:"getCustomFields",value:function(){var e=this.props,t=e.entity,n=e.requirementsData,r=e.mashupConfig,i=e.processId,o=n.newState,a=n.changedCFs,s=void 0===a?[]:a;if(!o&&!s.length)return[];var c=this.state,l=c.values,f=c.defaultValues,d=c.allEntityCustomFields,v=p.object(d.map(function(e){return[e.name,b.transformFromServerFieldValue(e,E(t,e))]})),h=[];o?!function(){var e=u({},f,l),n=p.object(d.map(function(t){return[t.name,b.sanitizeFieldValue(t,e[t.name])]}));h=j.getCustomFieldsNamesForNewState(o,r,i,t.entityType.name,n,v)}():s.length&&!function(){var e=p.pluck(s,"name"),n=u({},f,l,p.object(s.map(function(e){return[e.name,e.value]}))),o=p.object(d.map(function(e){return[e.name,b.sanitizeFieldValue(e,n[e.name])]}));h=j.getCustomFieldsNamesForChangedCustomFields(e,r,i,t.entityType.name,o,v)}();var y=T(d,h);return y.map(p.partial(S,t,l))}}],[{key:"propTypes",value:{entity:l.PropTypes.shape({id:l.PropTypes.number.isRequired,entityType:l.PropTypes.shape({name:l.PropTypes.string.isRequired}).isRequired}).isRequired,mashupConfig:l.PropTypes.array,onAfterSave:l.PropTypes.func,onCancel:l.PropTypes.func,processId:l.PropTypes.number.isRequired,requirementsData:l.PropTypes.object.isRequired},enumerable:!0}]),t}(f["default"].Component);t["default"]=I,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},s=n(55),c=r(s),l=n(59),f=r(l),p=n(60),d=r(p),v=function(e){function t(){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),a(t,[{key:"render",value:function(){return c["default"].createElement("div",{className:f["default"]("ui-popup-overlay",d["default"].overlay)},c["default"].createElement("div",{className:f["default"]("ui-popup",d["default"].outerpopup)},c["default"].createElement("div",{className:f["default"](d["default"].innerpopup)},c["default"].createElement("div",{className:"close",onClick:this.props.onClose}),c["default"].createElement("div",{className:f["default"](d["default"].popupcontentcrollablearea)},c["default"].createElement("div",{className:f["default"](d["default"].content)},this.props.children)))))}}]),t}(c["default"].Component);t["default"]=v,e.exports=t["default"]},function(e,t,n){var r;/*!
	  Copyright (c) 2015 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e+=" "+n;else if(Array.isArray(n))e+=" "+i.apply(null,n);else if("object"===r)for(var a in n)o.call(n,a)&&n[a]&&(e+=" "+a)}}return e.substr(1)}var o={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=i:(r=function(){return i}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)))}()},function(e,t,n){var r=n(61);"string"==typeof r&&(r=[[e.id,r,""]]);n(54)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(53)(),t.locals={overlay:"_3idgxfgZU1py1KPzyqvmJC",outerpopup:"_24SCx12WS99ayjKkY4VUFE",innerpopup:"_3IhnqcBItw7p9dYjPTVfLI",popupcontentcrollablearea:"_2plNT2Z_AmwI4R89e6KFW-",content:"_3HF8nl8pZ23HhjubMXx5hK"},t.push([e.id,"._3idgxfgZU1py1KPzyqvmJC{background:rgba(33,33,33,.5);position:absolute;width:100%;height:100vh;text-align:left;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:99999}._24SCx12WS99ayjKkY4VUFE,._3IhnqcBItw7p9dYjPTVfLI{background:0 0;position:relative;flex-direction:column;display:flex}._24SCx12WS99ayjKkY4VUFE{top:0;left:0;right:0;bottom:0;padding:0;box-shadow:none;border-radius:0;z-index:0}._3IhnqcBItw7p9dYjPTVfLI{max-height:100vh;max-width:100vw;padding:15px;box-sizing:border-box}._3IhnqcBItw7p9dYjPTVfLI>.close,._3IhnqcBItw7p9dYjPTVfLI>.close:hover{top:0;right:0;float:none}._2plNT2Z_AmwI4R89e6KFW-{overflow:auto;background:#fff;border-radius:3px;box-shadow:0 1px 3px #0f0e0f;display:flex;flex-direction:column;width:530px}._3HF8nl8pZ23HhjubMXx5hK{font-family:Arial,sans-serif;font-size:12px;padding:15px 10px}",""])},function(e,t,n){"use strict";var r=n(5),i=n(3),o=n(63),a=o.getStore().getTypes().getDictionary(),u=o.getApplicationPath(),s=function h(e){var t="";return e&&(Array.isArray(e)?t=e.map(h).join(","):"object"==typeof e?t=Object.keys(e).map(function(t){return t+"["+h(e[t])+"]"}).join(","):"function"!=typeof e&&(t=String(e))),t},c=function(e){return a[e.toLowerCase()].resource},l=function(e,t,n){return r.ajax({type:e,url:u+"/api/v1/"+t,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(n)})},f=function(e,t,n){return r.ajax({type:e,url:u+"/api/v1/"+t,contentType:"application/json; charset=utf-8",dataType:"json",data:n})},p=function(e,t){var n=function r(e,t){return f("get",e,t).then(function(e){var t=e.Items;return e.Next?r(e.Next).then(t.concat.bind(t)):t})};return n(e,t)},d=function y(e){return i.isArray(e)?e.map(function(e){return y(e)}):i.isObject(e)?i.object(i.map(e,function(e,t){var n=t[0].toLowerCase()+t.slice(1);return"Items"===n&&i.isArray(e)?y(e):[n,y(e)]})):e},v=function(e,t){var n={};return e?(e.include&&"string"!=typeof e.include&&(n.include="["+s(e.include)+"]"),!e.take&&t&&t.take&&(n.take=t.take),n):n};e.exports={get:function(){var e=Array.prototype.slice.call(arguments);return 3===e.length?f("GET",c(e[0])+"/"+e[1],v(e[2])).then(d):p(e[0],v(e[1],{take:1e3})).then(d)},remove:function(e,t){return f("DELETE",c(e)+"/"+t)},create:function(e,t){return l("POST",c(e),t)},save:function(e,t,n){return l("POST",c(e)+"/"+t,n)}}},function(e,t){e.exports=O},function(e,t,n){"use strict";var r=n(5),i=n(3),o=n(63),a=o.getStore().getTypes().getDictionary(),u=o.getApplicationPath(),s=function(e){return a[e.toLowerCase()].resource},c=function(e,t,n){return r.ajax({type:e,url:u+"/api/v2/"+t,contentType:"application/json; charset=utf-8",dataType:"json",data:n})},l=function(e,t){var n=function(e,t){return c("get",e,t).then(function(e){var t=e.items;return t})};return n(e,t)},f=function d(e){return i.isArray(e)?e.map(function(e){return d(e)}):i.isObject(e)?i.object(i.map(e,function(e,t){var n=t[0].toLowerCase()+t.slice(1);return"Items"===n&&i.isArray(e)?d(e):[n,d(e)]})):e},p=function(e){return e};e.exports={get:function(){var e=Array.prototype.slice.call(arguments);return 3===e.length?c("GET",s(e[0])+"/"+e[1],p(e[2])).then(f):l(e[0],p(e[1])).then(f)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(3),o=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];return i.isString(e)?i.compact(i.invoke(e.split(/\r?\n/),"trim")):[]},a=function(e,t){return"multipleselectionlist"===e.type?i.isString(t)?t.split(","):[]:t};t.transformFromServerFieldValue=a;var u=function(e){var t=r({},e,{type:e.fieldType.toLowerCase()});return t.config.defaultValue=a(t,t.config.defaultValue),("multipleselectionlist"===t.type||"dropdown"===t.type)&&(t.value=o(t.value)),t};t.transformFieldFromServer=u;var s=function(e,t){if("multipleselectionlist"===e.type&&t)return t.join(",");if("entity"===e.type&&t){var n=t.id,r=t.entityType.name,i=t.name;return{id:n,kind:r,name:i}}return t};t.transformToServerFieldValue=s;var c=function(e,t){return"url"===e.type&&t?{url:t.url.trim(),label:t.label.trim()}:"string"==typeof t?t.trim():t};t.sanitizeFieldValue=c;var l=function(e,t){var n={text:function(e){return!e},url:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.url,n=e.label;return!t||!n},checkbox:function(e){return e!==!1&&e!==!0},multipleselectionlist:function(e){return!e.length}};return(n[e.type]||n.text)(t)?new Error("Field is empty"):void 0},f=function(e,t){var n=c(e,t),r=[];return[l].forEach(function(t){var i=t(e,n);i&&(r=r.concat(i))}),r};t.validateFieldValue=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(67),p=r(f),d=n(102),v=function(e){function t(){var e=this;i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.handleSubmit=function(t){t.preventDefault();var n=e.props.fields.map(function(t){return a({},t,{value:e.refs[t.name].value})});e.props.onSubmit(n)},this.handleChange=function(t,n){e.props.onChange(t,n)}}return o(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.fields,r=t.showProgress,i=n.some(function(e){var t=e.validationErrors;return t.length});return l["default"].createElement("form",{onSubmit:this.handleSubmit},n.map(function(t){return l["default"].createElement(p["default"],{item:t,key:t.name,onChange:e.handleChange,ref:t.name})}),l["default"].createElement("div",{className:d.buttons},l["default"].createElement("button",{className:"tau-btn tau-primary",disabled:i||r||null,type:"submit"},"Save and Continue")))}}],[{key:"propTypes",value:{fields:c.PropTypes.arrayOf(p["default"].propTypes.item),onChange:c.PropTypes.func,onSubmit:c.PropTypes.func,showProgress:c.PropTypes.bool,values:c.PropTypes.object},enumerable:!0},{key:"defaultProps",value:{fields:[],values:{}},enumerable:!0}]),t}(l["default"].Component);t["default"]=v,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(3),p=n(59),d=r(p),v=n(68),h=r(v),y=n(100),m=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.onChange,r=t.name,o=t.field,a=t.hasDirtyValue,u=t.value,s=t.hasErrors,c=t.validationErrors,p=o.type,v=r,m=void 0;"checkbox"===p&&(v=""),"money"===p&&(v=v+", "+o.config.units);var g=s&&a,b=g?f.pluck(c,"message").join("\n"):null;return l["default"].createElement("div",{className:y.block,title:b},l["default"].createElement("label",{className:y.label},l["default"].createElement("div",{className:d["default"](y.labeltext,i({},y.labeltextrichtext,"richtext"===p))},l["default"].createElement("span",null,v),m?l["default"].createElement("div",{className:y.sublabeltext},m):null),l["default"].createElement(h["default"],{field:o,isInvalid:g,onChange:n,ref:"input",validationErrors:c,value:u})))}},{key:"value",get:function(){return this.refs.input.value}}],[{key:"propTypes",value:{item:c.PropTypes.shape({name:c.PropTypes.string,field:h["default"].propTypes.field.isRequired,value:c.PropTypes.any}).isRequired,onChange:c.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{onChange:f.noop},enumerable:!0}]),t}(l["default"].Component);t["default"]=m,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(3),p=n(69),d=r(p),v=n(70),h=r(v),y=n(74),m=r(y),g=n(75),b=r(g),_=n(84),C=r(_),O=n(85),x=r(O),w=n(87),j=r(w),P=n(94),F=r(P),E=n(86),T=r(E),k=n(97),S=r(k),I=function(e){function t(){var e=this;i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.handleChange=function(){e.props.onChange(e.props.field,e.value)},this.handleBlur=function(){e.props.onChange(e.props.field,e.value)}}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props.field,t=e.type,n={checkbox:d["default"],date:h["default"],dropdown:m["default"],entity:b["default"],multipleselectionlist:C["default"],number:x["default"],richtext:j["default"],templatedurl:F["default"],text:T["default"],url:S["default"]}[t]||T["default"];return l["default"].createElement(n,a({},this.props,{onBlur:this.handleBlur,onChange:this.handleChange,ref:"widget"}))}},{key:"value",get:function(){return this.refs.widget.value}}],[{key:"propTypes",value:{field:c.PropTypes.shape({type:c.PropTypes.string}).isRequired,isInvalid:c.PropTypes.bool,onChange:c.PropTypes.func,value:c.PropTypes.any},enumerable:!0},{key:"defaultProps",value:{onChange:f.noop},enumerable:!0}]),t}(l["default"].Component);t["default"]=I,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.field,n=e.value,r=t.name;return l["default"].createElement("label",{className:"tau-checkbox"},l["default"].createElement("input",a({},this.props,{checked:n,ref:"input",type:"checkbox"})),l["default"].createElement("i",{className:"tau-checkbox__icon"}),l["default"].createElement("span",{style:{color:"#999"}},r))}},{key:"value",get:function(){return c.findDOMNode(this.refs.input).checked}}],[{key:"propTypes",value:{field:c.PropTypes.shape({name:c.PropTypes.string}).isRequired,value:c.PropTypes.any},enumerable:!0}]),t}(l["default"].Component);t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(5),p=r(f),d=n(59),v=r(d),h=n(71),y=r(h),m=n(72),g=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),u(t,[{key:"componentDidMount",value:function(){var e=p["default"](c.findDOMNode(this.refs.trigger)),t=p["default"](c.findDOMNode(this.refs.input));p["default"].datepicker.parseDate=function(e,t){return y["default"].parse(t)},p["default"].datepicker.formatDate=function(e,t){return y["default"].formatAs(t,e)},t.datepicker({dateFormat:y["default"].getFormatData().date["short"],onSelect:this.props.onChange}),e.on("click",function(){return t.datepicker("show")})}},{key:"render",value:function(){return l["default"].createElement("div",{className:v["default"]("ui-dateeditor",m.block)},l["default"].createElement("input",a({},this.props,{className:v["default"]("tau-in-text",{"tau-error":this.props.isInvalid}),placeholder:" ",ref:"input",type:"text",value:this.props.value})),l["default"].createElement("span",{className:"ui-datepicker-trigger",ref:"trigger"}))}},{key:"value",get:function(){return c.findDOMNode(this.refs.input).value}}]),t}(l["default"].Component);t["default"]=g,e.exports=t["default"]},function(e,t){e.exports=x},function(e,t,n){var r=n(73);"string"==typeof r&&(r=[[e.id,r,""]]);n(54)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(53)(),t.locals={block:"_3LtdTBjrx9qqH_L5AHfvap"},t.push([e.id,"._3LtdTBjrx9qqH_L5AHfvap{display:flex;align-items:center}._3LtdTBjrx9qqH_L5AHfvap>input{flex:1 1 auto;margin-left:2px;border:1px solid #acb6bf;box-shadow:none}._3LtdTBjrx9qqH_L5AHfvap>button{flex:0 0 auto}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(59),p=r(f),d=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.field,n=e.value,r=[""].concat(t.value);return l["default"].createElement("select",a({},this.props,{className:p["default"]("tau-select",{"tau-error":this.props.isInvalid}),ref:"input",type:"text",value:n}),r.map(function(e,t){return l["default"].createElement("option",{key:t,value:e},e)}))}},{key:"value",get:function(){return c.findDOMNode(this.refs.input).value}}]),t}(l["default"].Component);t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(59),p=r(f),d=n(5),v=r(d),h=n(3),y=n(76),m=r(y),g=n(77),b=r(g),_=n(79),C=r(_),O=n(82),x=function(e){function t(){var e=this;i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.state={entity:void 0,showFinder:!1,showFinderBubble:!1},this.handleFocus=function(){e.setState({showFinder:!e.state.showFinder}),e.state.showFinder&&e.props.onBlur()},this.handleSelect=function(t){e.setState({entity:t,showFinder:!1,showFinderBubble:!1},function(){return e.props.onChange(t)})},this.handleClickReset=function(){e.setState({entity:void 0,showFinder:!1,showFinderBubble:!1},function(){return e.props.onChange(void 0)})},this.handleClickOutsideFinder=function(){e.setState(a({},e.state,{showFinder:!1,showFinderBubble:!1}),function(){return e.props.onBlur()})},this.handleFinderAdjusted=function(){e.refs.bubble&&e.refs.bubble.adjust(),e.state.showFinderBubble||e.setState(a({},e.state,{showFinderBubble:!0}))}}return o(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this,t=function(e){return v["default"](e).closest(".tau-bubble").length};this.clickListener=function(n){e.state.showFinder&&!t(n.target)&&e.handleClickOutsideFinder()},document.body.addEventListener("click",this.clickListener)}},{key:"render",value:function(){var e=this.state,t=e.entity,n=e.showFinder,r=void 0,i=void 0;n&&(r=l["default"].createElement(b["default"],{filterEntityTypeName:"userstory",filterFields:{"project.id":512},onAdjust:this.handleFinderAdjusted,onRendered:this.handleFinderRendered,onSelect:this.handleSelect}),i=l["default"].createElement(m["default"],{config:{onPositionConfig:function(e){return a({},e,{at:"left middle",my:"right middle",collision:"flipfit flipfit"})}},overlay:r,ref:"bubble",style:{visibility:this.state.showFinderBubble?"visible":"hidden"},target:c.findDOMNode(this.refs.trigger)}));var o=void 0;return o=t?l["default"].createElement(C["default"],{entity:t}):l["default"].createElement("span",{className:O.placeholder},"Click to select entity"),l["default"].createElement("div",a({},this.props,{className:O.block,onBlur:h.noop}),l["default"].createElement("div",{className:p["default"]("tau-resetable-input",O.inputwrapper)},l["default"].createElement("div",{className:p["default"]("tau-in-text",{"tau-error":this.props.isInvalid}),onClick:this.handleFocus,ref:"trigger",tabIndex:"0"},o),t?l["default"].createElement("button",{onClick:this.handleClickReset,type:"button"}):null),i)}},{key:"value",get:function(){return this.state.entity}}],[{key:"propTypes",value:{onBlur:c.PropTypes.func,onChange:c.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{onBlur:h.noop,onChange:h.noop},enumerable:!0}]),t}(l["default"].Component);t["default"]=x,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(5),p=r(f),d=n(3),v=function(e){function t(){var e=this;i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.handleClickDocument=function(t){var n=e.props.target;t.target===l["default"].findDOMNode(n)||l["default"].findDOMNode(n).contains(t.target)||t.target===e.bubble||e.bubble.contains(t.target)||e.props.onOuterClick()}}return o(t,e),u(t,[{key:"componentDidMount",value:function(){this.span=p["default"]("<span />").appendTo("body")[0],this.renderBubble(this.props.target,this.props.overlay),this.documentListener=this.handleClickDocument.bind(this),document.body.addEventListener("click",this.documentListener)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.target,n=e.target;t!==n&&(p["default"](t).tauBubble("instance")&&p["default"](t).tauBubble("destroy"),this.renderBubble(n,e.overlay)),p["default"](t).tauBubble("instance")&&p["default"](t).tauBubble("widget").css(e.style)}},{key:"componentWillUnmount",value:function(){p["default"](this.props.target).tauBubble("destroy"),document.body.removeEventListener("click",this.documentListener)}},{key:"render",value:function(){return null}},{key:"renderBubble",value:function(e,t){this.bubble=c.findDOMNode(l["default"].render(t,this.span)),p["default"](e).tauBubble(a({target:e,content:this.span,showOnCreation:!0,showEvent:"none",hideEvent:"none",documentMouseEvent:"none",stackName:String(Number(new Date)),zIndex:999},this.props.config)),p["default"](e).tauBubble("widget").css(this.props.style)}},{key:"adjust",value:function(){p["default"](this.props.target).tauBubble("adjustPosition")}}],[{key:"propTypes",value:{config:c.PropTypes.object,onOuterClick:c.PropTypes.func.isRequired,overlay:c.PropTypes.node.isRequired,style:c.PropTypes.object,target:c.PropTypes.object.isRequired},enumerable:!0},{key:"defaultProps",value:{config:{},onOuterClick:d.noop,style:{}},enumerable:!0}]),t}(l["default"].Component);t["default"]=v,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(3),p=n(78),d=r(p),v=function(e){function t(){var e=this;i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.handleEvents=function(t,n){var r={entitySelected:function(t){var n=t.entity;return e.handleSelect(n)},adjustPosition:function(){return e.handleAdjust()}};r[t]&&r[t](n)},this.handleSelect=function(t){return e.props.onSelect(t)},this.handleAdjust=function(){return e.props.onAdjust()}}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.filterEntityTypeName,n=e.filterDsl,r=e.filterFields,i={};return t&&(i.entityType=t),(r||n)&&(i.filter=a({},r),n&&(i.filter.init_dsl=n)),l["default"].createElement(d["default"],{config:i,onEvents:this.handleEvents,type:"finder.entity"})}}],[{key:"propTypes",value:{filterDsl:c.PropTypes.string,filterEntityTypeName:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.arrayOf(c.PropTypes.string)]),filterFields:c.PropTypes.object,onAdjust:c.PropTypes.func,onSelect:c.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{filterDsl:void 0,filterEntityTypeName:void 0,filterFields:void 0,onAdjust:f.noop,onSelect:f.noop},enumerable:!0}]),t}(l["default"].Component);t["default"]=v,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(3),p=n(38),d=r(p),v=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.type,r=t.config,i=t.context,o=t.onEvents,u=d["default"].create({name:"targetprocesscomponent."+n});this.bus=u,u.once("afterRender",function(t){var n=t.data.element;n.length&&c.findDOMNode(e).appendChild(n[0])}),u.once("childrenBuses.ready",function(e){var t=e.data,n=t[0];n.fire=f.wrap(n.fire.bind(n),function(e,t,n){o(t,n),e(t,n)})}),u.initialize({context:i,children:[a({},r,{type:n})]})}},{key:"componentWillUnmount",value:function(){this.bus.fire("destroy")}},{key:"render",value:function(){return l["default"].createElement("div",null)}}],[{key:"propTypes",value:{config:c.PropTypes.object,context:c.PropTypes.object,onEvents:c.PropTypes.func,type:c.PropTypes.string.isRequired},enumerable:!0},{key:"defaultProps",value:{context:{},config:{},onEvents:f.noop},
enumerable:!0}]),t}(l["default"].Component);t["default"]=v,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(59),p=r(f),d=n(80),v=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.entity,n=e.className;return l["default"].createElement("span",a({},this.props,{className:p["default"]("tau-linkentity",d.block,n)}),l["default"].createElement("em",{className:p["default"]("tau-entity-icon","tau-entity-icon--"+t.entityType.name.toLowerCase(),"tau-linkentity__icon")},t.id),l["default"].createElement("span",{className:"tau-linkentity__inner"},t.name))}}]),t}(l["default"].Component);t["default"]=v,e.exports=t["default"]},function(e,t,n){var r=n(81);"string"==typeof r&&(r=[[e.id,r,""]]);n(54)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(53)(),t.locals={block:"_2JMvi-38cNXWX1m3k81H5s"},t.push([e.id,"._2JMvi-38cNXWX1m3k81H5s{display:flex;align-items:baseline}._2JMvi-38cNXWX1m3k81H5s>.tau-linkentity__icon{padding-left:5px;flex:0 0 auto}",""])},function(e,t,n){var r=n(83);"string"==typeof r&&(r=[[e.id,r,""]]);n(54)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(53)(),t.locals={block:"_3mUrVNJoWxu2B2zQC57dsr",inputwrapper:"_3vM1RNxFMn0jhDPeCKuTm2",placeholder:"_27MZlg4L_xFrYu5S8WfiUN"},t.push([e.id,"._3mUrVNJoWxu2B2zQC57dsr{display:flex;flex-grow:1}._3vM1RNxFMn0jhDPeCKuTm2{display:flex;align-items:center;cursor:pointer;flex-grow:1}._3vM1RNxFMn0jhDPeCKuTm2>.tau-in-text{flex-grow:1;display:flex;align-items:center}._27MZlg4L_xFrYu5S8WfiUN{font-size:11px;color:#acb6bf}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(5),p=r(f),d=n(59),v=r(d),h=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.field,n=e.value,r=t.value;return l["default"].createElement("select",a({},this.props,{className:v["default"]("tau-select",{"tau-error":this.props.isInvalid}),multiple:!0,ref:"input",type:"text",value:n}),r.map(function(e,t){return l["default"].createElement("option",{key:t,value:e},e)}))}},{key:"value",get:function(){return p["default"](c.findDOMNode(this.refs.input)).val()}}],[{key:"defaultProps",value:{value:[]},enumerable:!0}]),t}(l["default"].Component);t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(86),p=r(f),d=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),u(t,[{key:"render",value:function(){return l["default"].createElement(p["default"],a({},this.props,{ref:"input"}))}},{key:"value",get:function(){return c.findDOMNode(this.refs.input).value}}]),t}(l["default"].Component);t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(59),p=r(f),d=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),u(t,[{key:"render",value:function(){return l["default"].createElement("input",a({placeholder:" ",ref:"input",type:"text"},this.props,{className:p["default"]("tau-in-text",{"tau-error":this.props.isInvalid})}))}},{key:"value",get:function(){return c.findDOMNode(this.refs.input).value}}]),t}(l["default"].Component);t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(88),p=r(f),d=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),u(t,[{key:"render",value:function(){return l["default"].createElement(p["default"],a({},this.props,{ref:"input"}))}},{key:"value",get:function(){return this.refs.input.value}}]),t}(l["default"].Component);t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(5),p=r(f),d=n(63),v=r(d),h=n(89),y=r(h),m=n(92),g=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.state={canApplyRicheditor:Boolean(p["default"].ui.richeditor)}}return o(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this;if(!this.state.canApplyRicheditor)return null;var t=p["default"](c.findDOMNode(this.refs.input.textarea));t.richeditor({ckPath:v["default"].getCkPath(),settings:{toolbar:"Basic",toolbarStartupExpanded:!0,toolbarCanCollapse:!1,startupFocus:!0,uploaderConfig:{uploadFiles:null},baseFloatZIndex:1e5},saveAction:{available:!1},cancelAction:{available:!1}}),t.richeditor("show"),t.on("richeditorchange",this.props.onChange);var n=function r(){t.richeditor("instance").editor?t.richeditor("instance").editor.on("blur",e.props.onChange):setTimeout(r,100)};n()}},{key:"componentWillUnmount",value:function(){if(!this.state.canApplyRicheditor)return null;var e=p["default"](c.findDOMNode(this.refs.input.textarea));e.richeditor("destroy")}},{key:"render",value:function(){return l["default"].createElement(y["default"],a({},this.props,{className:m.block,ref:"input"}))}},{key:"value",get:function(){return this.state.canApplyRicheditor?p["default"](c.findDOMNode(this.refs.input.textarea)).richeditor("getText"):this.refs.input.value}}]),t}(l["default"].Component);t["default"]=g,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(59),p=r(f),d=n(90),v=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),u(t,[{key:"render",value:function(){return l["default"].createElement("div",{className:p["default"](d.block,{"tau-error":this.props.isInvalid},this.props.className)},l["default"].createElement("textarea",a({placeholder:" ",ref:"input"},this.props,{className:p["default"]("tau-in-text",d.textarea,{"tau-error":this.props.isInvalid})})))}},{key:"value",get:function(){return c.findDOMNode(this.textarea).value}},{key:"textarea",get:function(){return this.refs.input}}]),t}(l["default"].Component);t["default"]=v,e.exports=t["default"]},function(e,t,n){var r=n(91);"string"==typeof r&&(r=[[e.id,r,""]]);n(54)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(53)(),t.locals={block:"_1OX9xfRIRp-lkD0uoT3dyi",textarea:"_2zjKsiitB0L2WQ1gGoj7sq"},t.push([e.id,"._1OX9xfRIRp-lkD0uoT3dyi{flex-grow:1;display:flex;flex-direction:column;margin:0 2px}._2zjKsiitB0L2WQ1gGoj7sq._2zjKsiitB0L2WQ1gGoj7sq{flex:1 1 auto;width:100%;height:6em;margin:0;resize:vertical}",""])},function(e,t,n){var r=n(93);"string"==typeof r&&(r=[[e.id,r,""]]);n(54)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(53)(),t.locals={block:"vC7Tm0eWuIJj0DwwpD2yx"},t.push([e.id,".vC7Tm0eWuIJj0DwwpD2yx.tau-error .cke{border-color:#f66}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(s){i=!0,o=s}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},l=n(55),f=r(l),p=n(86),d=r(p),v=n(95),h=function(e){function t(){i(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props.field,t=e.value,n=t.split("{0}"),r=u(n,2),i=r[0],o=r[1];return f["default"].createElement("div",{className:v.block},i?f["default"].createElement("span",{className:v.template},i):null,f["default"].createElement(d["default"],a({},this.props,{ref:"input"})),o?f["default"].createElement("span",{className:v.template},o):null)}},{key:"value",get:function(){return l.findDOMNode(this.refs.input).value}}]),t}(f["default"].Component);t["default"]=h,e.exports=t["default"]},function(e,t,n){var r=n(96);"string"==typeof r&&(r=[[e.id,r,""]]);n(54)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(53)(),t.locals={block:"_1x9LGMXr05E_QMtU9X9vI6",template:"_1RJV84eHeFNXAdIKsQciUv"},t.push([e.id,"._1x9LGMXr05E_QMtU9X9vI6{flex:1 1 auto;display:flex;align-items:baseline}._1x9LGMXr05E_QMtU9X9vI6>input{flex:1 1 auto}._1RJV84eHeFNXAdIKsQciUv{font-style:italic;flex:0 0 auto}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0,u=c=void 0}},c=n(55),l=r(c),f=n(59),p=r(f),d=n(98),v=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props.value;return l["default"].createElement("div",{className:d.block},l["default"].createElement("div",{className:d.row},l["default"].createElement("label",{className:d.label},l["default"].createElement("span",{className:d.labeltext},"Url"),l["default"].createElement("input",a({},this.props,{className:p["default"]("tau-in-text",{"tau-error":this.props.isInvalid}),ref:"url",type:"text",value:e.url})))),l["default"].createElement("div",{className:d.row},l["default"].createElement("label",{className:d.label},l["default"].createElement("span",{className:d.labeltext},"Description"),l["default"].createElement("input",a({},this.props,{className:p["default"]("tau-in-text",{"tau-error":this.props.isInvalid}),ref:"label",type:"text",value:e.label})))))}},{key:"value",get:function(){return{url:c.findDOMNode(this.refs.url).value,label:c.findDOMNode(this.refs.label).value}}}],[{key:"defaultProps",value:{value:{url:void 0,label:void 0}},enumerable:!0}]),t}(l["default"].Component);t["default"]=v,e.exports=t["default"]},function(e,t,n){var r=n(99);"string"==typeof r&&(r=[[e.id,r,""]]);n(54)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(53)(),t.locals={block:"_1eUDFC08SWC5giTMlqtN4-",row:"_3FKe1bTEPBkiG-yeaQab5p",label:"_3WSPbnC7NN1qIY0UZLuYtA",labeltext:"_15HXgIUbNO4y9arvCyclsj"},t.push([e.id,"._1eUDFC08SWC5giTMlqtN4-{flex:1 1 0}._3FKe1bTEPBkiG-yeaQab5p+._3FKe1bTEPBkiG-yeaQab5p{margin-top:5px}._3WSPbnC7NN1qIY0UZLuYtA{display:flex;align-items:baseline}._3WSPbnC7NN1qIY0UZLuYtA>input,._3WSPbnC7NN1qIY0UZLuYtA>select{flex:1 1 auto}._15HXgIUbNO4y9arvCyclsj{flex:0 0 100px;color:#999};",""])},function(e,t,n){var r=n(101);"string"==typeof r&&(r=[[e.id,r,""]]);n(54)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(53)(),t.locals={block:"_1nJnaHCxDu7S63Y0g7Q3Yq",label:"_2jIs91_VS0ur_GOc-oP4LS",labeltext:"_3JK7uTIFYzIDu-B-i62U-0",labeltextrichtext:"C6r1CZlV7oF7h9BExBj6",sublabeltext:"_19-np2b6V2TAl_HCxBCWyz"},t.push([e.id,"._1nJnaHCxDu7S63Y0g7Q3Yq{margin-bottom:5px;margin-left:10px}._2jIs91_VS0ur_GOc-oP4LS{display:flex;align-items:baseline}._2jIs91_VS0ur_GOc-oP4LS>.tau-in-text,._2jIs91_VS0ur_GOc-oP4LS>.ui-dateeditor,._2jIs91_VS0ur_GOc-oP4LS>input,._2jIs91_VS0ur_GOc-oP4LS>select,._2jIs91_VS0ur_GOc-oP4LS>textarea{flex:1 1 auto;min-width:10px}._3JK7uTIFYzIDu-B-i62U-0{flex:0 0 100px;color:#999}.C6r1CZlV7oF7h9BExBj6{align-self:flex-start;position:relative;top:.5em}._19-np2b6V2TAl_HCxBCWyz{margin-top:3px;font-size:11px}",""])},function(e,t,n){var r=n(103);"string"==typeof r&&(r=[[e.id,r,""]]);n(54)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(53)(),t.locals={buttons:"_3-oCuRoqCs196g2SH94bg8"},t.push([e.id,"._3-oCuRoqCs196g2SH94bg8{margin-left:8px;margin-top:10px}",""])},function(e,t,n){var r=n(105);"string"==typeof r&&(r=[[e.id,r,""]]);n(54)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(53)(),t.locals={header:"_1QZ9XQZx_d72oq1vSe1vhZ",note:"flPerzHTJiIhedFpZuMaG",error:"_2yTDYNfVQNnECovxslhYDH"},t.push([e.id,"._1QZ9XQZx_d72oq1vSe1vhZ{margin-bottom:10px;font-size:14px}._2yTDYNfVQNnECovxslhYDH,.flPerzHTJiIhedFpZuMaG{padding:10px;background-color:#FFFFE1;margin-bottom:5px}.flPerzHTJiIhedFpZuMaG{color:#606B73}._2yTDYNfVQNnECovxslhYDH{color:#f66}",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(3),o=function(e,t){return String(e).toLowerCase()===String(t).toLowerCase()},a=function(e,t){return i.find(e,function(e,n){return o(n,t)})},u=function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return i.isArray(t)?t.some(function(t){return e.some(function(e){return o(t,e)})}):e.some(function(e){return o(e,t)})},s=function(e,t){return{_initial:t.isInitial,_final:t.isFinal,_planned:t.isPlanned}[e]||!1},c=function(e,t,n,i){var u=i;"string"==typeof i&&(u={name:i});var c=u,l=c.name,f=e.filter(function(e){return!e.processId||e.processId===t});return f.reduce(function(e,t){var i=a(t.constraints,n);if(!i)return e;var c=a(i,"entityStates");if(!c)return e;var f=c.filter(function(e){return o(e.name,l)||s(e.name,u)});return f.reduce(function(e,t){return r({},e,{requiredCustomFields:e.requiredCustomFields.concat(t.requiredCustomFields||[])})},e)},{name:l,requiredCustomFields:[]})},l=function(e,t,n){var r=e.filter(function(e){return!e.processId||e.processId===t});return r.reduce(function(e,t){var r=a(t.constraints,n);if(!r)return e;var i=a(r,"customFields");return i?e.concat(i):e},[])},f=function(e){return e.map(function(e){return r({},e,{requiredCustomFields:(e.requiredCustomFields||[]).map(function(e){return{name:e}})})})},p=function(e,t){return t[e.name]},d=function(e,t){return e.valueIn&&!u(e.valueIn,t)?!1:e.valueNotIn&&u(e.valueNotIn,t)?!1:!0},v=function(e,t){return e.requiredCustomFields&&d(e,t)?e.requiredCustomFields:[]},h=function(e,t,n){return e.reduce(function(e,r){return e.concat(v(r,t,n))},[])},y=function(e,t,n,r){var a=t.filter(function(t){return o(t.name,e.name)}),u=p(e,n),s=i.pluck(a,"name"),c=t.filter(function(e){return s.indexOf(e.name)<0}),l=h(a,u,c);return l.length?m(l,c,n,r):[]},m=function(e,t,n,r){var i=arguments.length<=4||void 0===arguments[4]?!0:arguments[4];return e.reduce(function(e,o){if(i&&r[o.name])return e;var a=e;return i&&(a=a.concat(o)),a=a.concat(y(o,t,n,r))},[])},g=function(e,t,n,r){var o=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],a=arguments.length<=5||void 0===arguments[5]?{}:arguments[5],u=c(t,n,r,e),s=f(l(t,n,r)),p=u.requiredCustomFields.map(function(e){return{name:e}}),d=m(p,s,o,a);return i.pluck(d,"name")};t.getCustomFieldsNamesForNewState=g;var b=function(e,t,n,r){var o=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],a=arguments.length<=5||void 0===arguments[5]?{}:arguments[5],s=f(l(t,n,r)),c=s.filter(function(t){return u(e,t.name)&&d(t,p(t,o))}),v=m(c,s,o,a,!1);return i.pluck(v,"name")};t.getCustomFieldsNamesForChangedCustomFields=b}])})}();
